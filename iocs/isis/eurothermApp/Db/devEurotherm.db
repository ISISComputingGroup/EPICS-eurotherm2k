record(bo, "$(P):SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
}

record(bo, "$(P):DISABLE") 
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "0")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}

record(ai, "$(P):OUTPUT") {
    field(SCAN, "1 second")
    field(DESC, "Output Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),OP) $(PORT)")
    field(EGU, "%")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:OUTPUT")
    field(SDIS, "$(P):DISABLE")
}

record(ai, "$(P):MAX_OUTPUT") {
    field(SCAN, "1 second")
    field(DESC, "Max Output Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),HO) $(PORT)")
    field(EGU, "%")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:MAX_OUTPUT")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):MAX_OUTPUT:SP") {
    field(DESC, "D Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),HO,$(P)) $(PORT)")
    field(DRVH, "100")
    field(DRVL, "0")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:MAX_OUTPUT:SP")
    field(SDIS, "$(P):DISABLE")
}

alias("$(P):MAX_OUTPUT", "$(P):MAX_OUTPUT:SP:RBV")

record(mbbi, "$(P):ERR") {
    field(DESC, "Error message")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto readhex($(GAD),$(LAD),EE) $(PORT)")
    field(ZRVL, "0")
    field(ZRST, "No Error")
    field(ONVL, "1")
    field(ONST, "Invalid Param")
    field(TWVL, "2")
    field(TWST, "Read Only")
    field(THVL, "7")
    field(THST, "Incorrect Msg")
    field(FRVL, "8")
    field(FRST, "Limit Error")
    field(PINI, "YES")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:ERR")
    field(SDIS, "$(P):DISABLE")
}

record(ai, "$(P):P") {
    field(SCAN, "1 second")
    field(DESC, "P Param Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),XP) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:P")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):P:SP") {
    field(DESC, "P Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),XP,$(P)) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:P:SP")
    field(SDIS, "$(P):DISABLE")
}

alias("$(P):P", "$(P):P:SP:RBV")

record(ai, "$(P):I") {
    field(SCAN, "1 second")
    field(DESC, "I Param Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),TI) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:I")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):I:SP") {
    field(DESC, "I Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),TI,$(P)) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:I:SP")
    field(SDIS, "$(P):DISABLE")
}

alias("$(P):I", "$(P):I:SP:RBV")

record(ai, "$(P):D") {
    field(SCAN, "1 second")
    field(DESC, "D Param Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),TD) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:D")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):D:SP") {
    field(DESC, "D Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),TD,$(P)) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:D:SP")
    field(SDIS, "$(P):DISABLE")
}

alias("$(P):D", "$(P):D:SP:RBV")

record(ai, "$(P):AUTOTUNE") {
    field(SCAN, "1 second")
    field(DESC, "Autotune Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),AT) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:AUTOTUNE")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):AUTOTUNE:SP") {
    field(DESC, "D Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),AT,$(P)) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:AUTOTUNE:SP")
    field(SDIS, "$(P):DISABLE")
}

alias("$(P):AUTOTUNE", "$(P):AUTOTUNE:SP:RBV")

record(ai, "$(P):SENSOR") {
    field(SCAN, "1 second")
    field(DESC, "Sensor Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),PV) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:SENSOR")
    field(SDIS, "$(P):DISABLE")
}

### SIMULATION RECORDS ###

record(ai, "$(P):SIM:MAX_OUTPUT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:MAX_OUTPUT","$(P):SIM:MAX_OUTPUT:SP")

alias("$(P):SIM:MAX_OUTPUT","$(P):SIM:MAX_OUTPUT:SP:RBV")

record(ai, "$(P):SIM:TEMP:LOWLIMIT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P):SIM:D")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:D","$(P):SIM:D:SP")

alias("$(P):SIM:D","$(P):SIM:D:SP:RBV")

record(mbbi, "$(P):SIM:ERR")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P):SIM:TEMP")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:TEMP","$(P):SIM:TEMP:SP")

alias("$(P):SIM:TEMP","$(P):SIM:TEMP:SP:RBV")

record(ai, "$(P):SIM:I")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:I","$(P):SIM:I:SP")

alias("$(P):SIM:I","$(P):SIM:I:SP:RBV")

record(ai, "$(P):SIM:AUTOTUNE")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:AUTOTUNE","$(P):SIM:AUTOTUNE:SP")

alias("$(P):SIM:AUTOTUNE","$(P):SIM:AUTOTUNE:SP:RBV")

record(ai, "$(P):SIM:SENSOR")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P):SIM:P")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

alias("$(P):SIM:P","$(P):SIM:P:SP")

alias("$(P):SIM:P","$(P):SIM:P:SP:RBV")

record(ai, "$(P):SIM:OUTPUT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

record(ai, "$(P):SIM:TEMP:HIGHLIMIT")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
}

# Additionts for story 285
record(stringin, "$(P):CAL:SEL:RBV")
{
    field(DTYP, "Soft Channel")
	field(INP, "$(P):TEMP.NSPE")
	field(PINI, "YES")
	field(SCAN, "1 second")
}

record(stringin, "$(P):CAL:RBV")
{
    field(DTYP, "Soft Channel")
	field(INP, "$(P):TEMP.SPEC")
	field(PINI, "YES")
	field(SCAN, "1 second")
}

record(bi, "$(P):CAL:APPLY")
{
    field(DTYP, "Soft Channel")
	field(ZNAM, "WAIT")
    field(ONAM, "APPLY")
	field(VAL, "0")
	field(FLNK, "$(P):CAL:APPLY:UPDATE.PROC")
}

record(bo, "$(P):CAL:APPLY:RST")
{
    field(DTYP, "Soft Channel")
	field(ZNAM, "STOP APPLY")
    field(ONAM, "")
	field(VAL, "0")
	field(OUT, "$(P):CAL:APPLY")
}

record(stringout, "$(P):CAL:SEL")
{
    field(DTYP, "Soft Channel")
	field(OUT, "$(P):TEMP.NSPE")
	field(FLNK, "$(P):CAL:SEL:UPDATE.PROC")
}

record(sseq, "$(P):CAL:SEL:UPDATE")
{
	field(DOL1, "$(P):CAL:SEL.VAL")
	field(LNK1, "$(P):TEMP.NSPE")
	field(DOL2, "$(P):CAL:SEL")
	field(LNK2, "$(P):TEMP:SP:RBV.NSPE")
	field(DOL3, "$(P):CAL:SEL")
	field(LNK3, "$(P):TEMP:HIGHLIMIT.NSPE")
	field(DOL4, "$(P):CAL:SEL")
	field(LNK4, "$(P):TEMP:LOWLIMIT.NSPE")
	field(DOL5, "$(P):CAL:SEL")
	field(LNK5, "$(P):TEMP:SP:CONV.NSPE")
}


record(seq, "$(P):CAL:APPLY:UPDATE")
{
	field(DOL1, "$(P):CAL:APPLY")
	field(LNK1, "$(P):TEMP.INIT NPP")
	field(DOL2, "$(P):CAL:APPLY")
	field(LNK2, "$(P):TEMP:SP:RBV.INIT NPP")
	field(DOL3, "$(P):CAL:APPLY")
	field(LNK3, "$(P):TEMP:HIGHLIMIT.INIT NPP")
	field(DOL4, "$(P):CAL:APPLY")
	field(LNK4, "$(P):TEMP:LOWLIMIT.INIT NPP")
	field(DOL5, "$(P):CAL:APPLY")
	field(LNK5, "$(P):TEMP:SP:CONV.INIT NPP")
	field(DOL6, "0")
	field(DLY6, "2")
	field(LNK6, "$(P):CAL:APPLY:RST.PROC")
}

record(cvt, "$(P):TEMP")
{
	field(SCAN, "1 second")
	field(INPY, "$(P):RBV PP")
	field(METH, "1D TABLE INVERTED")
	field(SPEC, "None.txt")
	field(TDIR, "$(SDIR)")
}

record(cvt, "$(P):TEMP:SP:RBV")
{
	field(SCAN, "1 second")
	field(INPY, "$(P):SP:RBV PP")
	field(METH, "1D TABLE INVERTED")
	field(SPEC, "None.txt")
	field(TDIR, "$(SDIR)")
}

record(cvt, "$(P):TEMP:HIGHLIMIT")
{
	field(SCAN, "1 second")
	field(INPY, "$(P):HILIM PP")
	field(METH, "1D TABLE INVERTED")
	field(SPEC, "None.txt")
	field(TDIR, "$(SDIR)")
}

record(cvt, "$(P):TEMP:LOWLIMIT")
{
	field(SCAN, "1 second")
	field(INPY, "$(P):LOWLIM PP")
	field(METH, "1D TABLE INVERTED")
	field(SPEC, "None.txt")
	field(TDIR, "$(SDIR)")
}

record(ai, "$(P):TEMP:SP")
{
	field(FLNK, "$(P):TEMP:SP:CONV.PROC")
	field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:TEMP:SP")
}

record(cvt, "$(P):TEMP:SP:CONV")
{
	field(OUT, "$(P):SP PP")
	field(INPX, "$(P):TEMP:SP")
	field(METH, "1D TABLE")
	field(SPEC, "None.txt")
	field(TDIR, "$(SDIR)")
}
# End Additions for story 285

#Alterations for story 285
record(ai, "$(P):RBV") {
    field(SCAN, "1 second")
    field(DESC, "Temperature Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),PV) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:TEMP")
    field(SDIS, "$(P):DISABLE")
}

record(ai, "$(P):SP:RBV") {
    field(SCAN, "1 second")
    field(DESC, "Temperature Setpoint Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),SP) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:TEMP:SP:RBV")
    field(SDIS, "$(P):DISABLE")
}

record(ao, "$(P):SP") {
    field(DESC, "Temperature Setpoint")
    field(DTYP, "stream")
    field(OUT, "@eurotherm2k.proto write($(GAD),$(LAD),SL,$(P)) $(PORT)")
    field(SDIS, "$(P):DISABLE")
}

record(ai, "$(P):HILIM") {
    field(SCAN, "1 second")
    field(DESC, "Setpoint Highlimit Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),HS) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:TEMP:HIGHLIMIT")
    field(SDIS, "$(P):DISABLE")
}

record(ai, "$(P):LOWLIM") {
    field(SCAN, "1 second")
    field(DESC, "Setpoint Lowlimit Readback")
    field(DTYP, "stream")
    field(INP, "@eurotherm2k.proto read($(GAD),$(LAD),LS) $(PORT)")
    field(SIML, "$(P):SIM")
    field(SIOL, "$(P):SIM:TEMP:LOWLIMIT")
    field(SDIS, "$(P):DISABLE")
}
#End Alterations for story 285